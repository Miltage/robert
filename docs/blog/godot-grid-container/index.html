<!doctype html><html lang="en" class="min-h-full antialiased"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><base href="/"><title>Building a custom layout for Godot&#39;s Grid Container | Robert Shenton</title><meta name="description" content=""><meta name="robots" content="index,follow"><link rel="stylesheet" href="/css/main.min.css"><script src="/js/main.min.js" defer="defer"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-34714917-1"></script><script>window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-34714917-1');</script><script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://unpkg.com/tippy.js@6"></script><link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/default.min.css"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script><script>hljs.registerLanguage("gdscript",function(){"use strict";var e=e||{};function r(e){return{aliases:["godot","gdscript"],keywords:{keyword:"and in not or self void as assert breakpoint class class_name extends is func setget signal tool yield const enum export onready static var break continue if elif else for pass return match while remote sync master puppet remotesync mastersync puppetsync print",built_in:"Color8 ColorN abs acos asin atan atan2 bytes2var cartesian2polar ceil char clamp convert cos cosh db2linear decimals dectime deg2rad dict2inst ease exp floor fmod fposmod funcref get_stack hash inst2dict instance_from_id inverse_lerp is_equal_approx is_inf is_instance_valid is_nan is_zero_approx len lerp lerp_angle linear2db load log max min move_toward nearest_po2 ord parse_json polar2cartesian posmod pow preload print_stack push_error push_warning rad2deg rand_range rand_seed randf randi randomize range_lerp round seed sign sin sinh smoothstep sqrt step_decimals stepify str str2var tan tanh to_json type_exists typeof validate_json var2bytes var2str weakref wrapf wrapi bool int float String NodePath Vector2 Rect2 Transform2D Vector3 Rect3 Plane Quat Basis Transform Color RID Object NodePath Dictionary Array PoolByteArray PoolIntArray PoolRealArray PoolStringArray PoolVector2Array PoolVector3Array PoolColorArray",literal:"true false null"},contains:[e.NUMBER_MODE,e.HASH_COMMENT_MODE,{className:"comment",begin:/"""/,end:/"""/},e.QUOTE_STRING_MODE,{variants:[{className:"function",beginKeywords:"func"},{className:"class",beginKeywords:"class"}],end:/:/,contains:[e.UNDERSCORE_TITLE_MODE]}]}}return e.exports=function(e){e.registerLanguage("gdscript",r)},e.exports.definer=r,e.exports.definer||e.exports}());</script><script>window.onload = function() {
            tippy.setDefaultProps({ delay: 0, animation: 'scale', inertia: true, offset: [0, 20] });
            tippy('[data-tippy-content]');
        }</script><script>hljs.highlightAll();</script><meta itemprop="name" content="Building a custom layout for Godot&#39;s Grid Container | Robert Shenton"><meta itemprop="description" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Building a custom layout for Godot&#39;s Grid Container | Robert Shenton"><meta name="twitter:description" content=""><meta name="twitter:site" content="@miltage"><meta name="twitter:creator" content="@miltage"><meta name="twitter:image:src" content="https://robertshenton.co.za"><meta name="og:title" content="Building a custom layout for Godot&#39;s Grid Container | Robert Shenton"><meta name="og:description" content=""><meta name="og:image" content="https://robertshenton.co.za"><meta name="og:url" content="https://robertshenton.co.za/blog/godot-grid-container/"><meta name="og:site_name" content="Robert Shenton"><meta name="og:locale" content="en_GB"><meta name="og:type" content="website"><link rel="icon" type="image/png" href="/images/favicon.png"><link rel="canonical" href="https://robertshenton.co.za/blog/godot-grid-container/"></head><body class="text-purple-900 leading-normal text-lg"><a class="visually-hidden" href="#main">Skip to content</a><div id="wrapper" class="wrapper pb-4 md:pb-0 flex flex-col relative min-h-screen"><main id="main" class="main inner flex flex-1 flex-col md:flex-row py-10 lg:py-20 focus:outline-none" tabindex="-1"><section id="sidebar" class="column m-0 p-0 md:ml-6 md:pt-20 text-center"><div class="content"><div class="avatar w-40 h-40"></div><h2>Robert Shenton</h2><p>Programmer, writer, game developer</p><div class="m-4"><img class="w-5 h-5 inline" src="images/icons/pin.svg"> Cape Town</div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/twitter.svg"> <a href="https://twitter.com/miltage">@miltage</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/github.svg"> <a href="https://github.com/miltage">Github</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/twitch.svg"> <a href="https://twitch.tv/miltage">Twitch</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/newgrounds.svg"> <a href="https://miltage.newgrounds.com/">Newgrounds</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/patreon.svg"> <a href="https://www.patreon.com/miltage">Patreon</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/ko-fi.svg"> <a href="https://ko-fi.com/miltage">Ko-fi</a></div><div class="m-1"><img class="w-5 h-5 inline" src="images/icons/discord.svg"> <a href="https://discord.gg/2TugD2rMM4">Discord</a></div><div class="my-6"><img class="w-4 h-4 inline mr-1" src="images/icons/back.svg"> <a href="/">Back to home</a></div></div></section><section class="column divider flex-0 min-h-full m-12"></section><section id="container-centre" class="column centre flex-1"><div class="post-header mb-12 md:mb-20"><h1 class="page-title text-3xl md:text-center md:text-5xl lg:text-6xl">Building a custom layout for Godot&#39;s Grid Container</h1><div class="text-sm md:text-base text-gray-600 flex flex-col text-center lg:flex-row lg:text-left justify-center"><time datetime="Thu Oct 14 2021 02:00:00 GMT+0200 (South Africa Standard Time)">14th October, 2021</time><p class="px-2">â€”</p><p class="category">Posted in <a href="/category/programming">Programming</a>, <a href="/category/godot">Godot</a>, <a href="/category/gamedev">Gamedev</a></p></div><figure class="mt-10 md:mt-20"><img data-lazy="/images/blog/godot-gridcontainer.jpg" alt=""></figure></div><div class="content post md:px-16"><p>Gain more control over your grid layout</p><p>Hey everybody! <em>Two blog posts this year??</em> Aren't we lucky!</p><p>Ever since I picked up <a href="https://godotengine.org/">Godot</a> last year to make <a href="/blog/sa-game-jam-2020/">this dodgeball game</a> I have been using it consistently to build both small prototypes and larger game projects. It took me a little time to grow accustom to their node-based architecture and GDScript, but now that I have I am finding that I can put things together very quickly. In fact, last week I found <a href="https://godotengine.org/article/how-actually-make-your-dream-game">this blog post</a> that states that rapid prototyping is the very ethos of Godot, which makes a lot of sense now.</p><p>However, as useful as the pre-built nodes tend to be, sometimes you just can't get them to do exactly what you need, and that's what this blog post is about.</p><h1>The problem</h1><p>So currently I am working on a prototype for a 3rd-person zombie shooter and I needed to display an ammo counter in the corner of the screen. Godot has a <a href="https://docs.godotengine.org/en/stable/classes/class_gridcontainer.html">GridContainer Node</a> that would work nicely for this. All you need to do is set some values like number of columns and the space between the items, then when you add children to the node it automatically configures the layout to align them neatly in a grid.</p><p>And it does exactly that. It works pretty nicely actually.</p><p><img src="/images/blog/gridcontainer-1.gif" alt="Grid Container"></p><p>The only issue is that I want to display this ammo counter in the bottom right corner of the screen, so I can't have it grow left-to-right top-to-bottom, but rather right-to-left bottom-to-top. This would be a big problem when switching weapons because they have different amounts of ammo. I tried manually repositioning the grid with code when the ammo count changed, but that turned out to be a massive headache.</p><p><img src="/images/blog/gridcontainer-3.gif" alt="Grid Container"></p><p>I fiddled with the settings of the Node but couldn't find a way to get it to do exactly what I desired. The closest I could get was by changing the Grow Direction of the container to both be 'Begin'. This would right-align the contents of the container, but it was still growing top-to-bottom, so it was actually going off-screen which is <em>no bueno</em>.</p><p><img src="/images/blog/gridcontainer-options.jpg" alt="Grid Container Grow Direction"></p><h1>The solution</h1><p>I took a look at the source code for the Grid Container and found a way to configure my own custom layout by overriding the layout function.</p><p>This is the entirety of the script I added to my container. It actually turned out to be pretty simple solution.</p><pre><code>extends GridContainer

func _notification(what):
	match (what):
		NOTIFICATION_SORT_CHILDREN:
			for i in get_child_count():
				var child = get_child(i)
				var hs = get(&quot;custom_constants/hseparation&quot;)
				var vs = get(&quot;custom_constants/vseparation&quot;)
				var row = floor(i / columns)
				child.rect_position = Vector2(i % columns * -hs, row * -vs)
</code></pre><p>I just loop through the children and give them a negative offset instead of their usual positive offset. I also made sure not to hardcode any values and still use the original variables of the Node, so I can adjust values easily by tweaking settings and not having to rewrite any code.</p><p>And just like that, the container now grows in the desired direction!</p><p><img src="/images/blog/gridcontainer-2.gif" alt="Grid Container"></p><p>It even updates the ammo count correctly. I'm pretty happy with it. It could use a little more polish, maybe some animation as the values change, but that is beyond the scope of the prototype for now...</p><p><img src="/images/blog/gridcontainer-4.gif" alt="Grid Container"></p><h1>Result</h1><p>Here you can see the final ammo counter in context of the rest of the game, nestled snugly in the corner.</p><p><img src="/images/blog/gridcontainer-screen.jpg" alt="Image Title"></p><p>And that's it!</p><p>As I continue to work with <a href="https://godotengine.org/">Godot</a> I am continuously learning how to achieve results with the engine, so I will try to write more of these quick tutorial-style blog posts.</p><p>Until then, happy devving!</p><ul class="tags flex pt-4 flex-col text-center md:flex-row md:text-left"><li class="mr-2 my-2"><a class="inline-block border border-teal-300 px-4 py-2 text-teal-500 text-xs font-semibold rounded hover:text-white hover:bg-teal-500 hover:border-teal-500 w-4/5 md:w-auto" href="/category/programming">Programming</a></li><li class="mr-2 my-2"><a class="inline-block border border-teal-300 px-4 py-2 text-teal-500 text-xs font-semibold rounded hover:text-white hover:bg-teal-500 hover:border-teal-500 w-4/5 md:w-auto" href="/category/godot">Godot</a></li><li class="mr-2 my-2"><a class="inline-block border border-teal-300 px-4 py-2 text-teal-500 text-xs font-semibold rounded hover:text-white hover:bg-teal-500 hover:border-teal-500 w-4/5 md:w-auto" href="/category/gamedev">Gamedev</a></li></ul></div></section></main></div></body></html>